{"ast":null,"code":"import _slicedToArray from\"C:/Users/Rashad/Desktop/auth/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,Fragment}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import{getItem}from\"../../redux/productsSlice\";import{useDispatch,useSelector}from\"react-redux\";import{Button,Card,Container,Row,Col}from\"react-bootstrap\";import{useNavigate,Link}from\"react-router-dom\";import{cartProduct}from\"../../redux/cartSlice\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(){var dispatch=useDispatch();var navigate=useNavigate();var item=useSelector(function(state){return state.products.item;});var _useParams=useParams(),name=_useParams.name;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allData=_useState2[0],setAllData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),emailAddress=_useState4[0],setEmailAddress=_useState4[1];useEffect(function(){// console.log(name);\naxios.get(\"http://127.0.0.1:8000/api/products/?category=\".concat(name)).then(function(response){setAllData(response.data);}).catch(function(err){return toast.error(err.message);});axios.get(\"http://127.0.0.1:8000/api/us/?search=\".concat(localStorage.getItem(\"email\"))).then(function(res){setEmailAddress(res.data[0].id);});console.log(\"email address: \"+emailAddress);},[emailAddress]);// -------------------------QTY-----------------------------\nvar mail=localStorage.getItem(\"email\");// const dispatch = useDispatch();\nvar data=useSelector(function(state){return state.cartProduct.data;});useEffect(function(){dispatch(cartProduct(mail));},[dispatch]);// -------------------------QTY-----------------------------\nvar getItemId=function getItemId(id){dispatch(getItem(id));navigate(\"/viewProduct\");};var addToCart=function addToCart(productId){var obj={customer:emailAddress,product:productId,complete:false// qty: 1,\n};axios.post(\"http://127.0.0.1:8000/api/cart/\",obj).then(function(res){// toast.success(\"Product added successfully\");\nSwal.fire({customClass:{container:\"swal-overlay\",title:'title-color'},title:\"Product added successfully\",confirmButtonColor:\"#113A58\",width:250,icon:\"success\",color:\"#716add\",background:\"#fff \"});dispatch(cartProduct(mail));}).catch(function(err){return toast.error(err.message);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\",marginTop:\"5px\",color:\"#777\"},children:name})}),/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center align-items-center\",children:allData.map(function(value,index){return/*#__PURE__*/_jsx(Col,{className:\"mt-3\",xs:\"auto\",children:/*#__PURE__*/_jsxs(Card,{className:\"shadow-lg rounded hoverElement\",style:{width:\"15rem\",borderRadius:15},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Card.Img,{style:{height:\"250px\",width:\"230px\",padding:\"5px\"// objectFit: \"none\",\n},variant:\"top\",src:value.image})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{style:{fontSize:\"17px\",whiteSpace:\"nowrap\",overflow:\"hidden\",textOverflow:\"ellipsis\"},children:value.name}),/*#__PURE__*/_jsx(Card.Text,{style:{whiteSpace:\"nowrap\",overflow:\"hidden\",textOverflow:\"ellipsis\"},children:value.description}),/*#__PURE__*/_jsxs(Card.Text,{children:[value.price,\"$\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex aligh-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return getItemId(value.id);},style:{background:\"#113A58\"},variant:\"primary\",children:\"View\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return addToCart(value.id);},style:{background:\"#113A58\"},variant:\"primary\",children:\"Add Cart\"})]})]})]})},index);})})})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Category;","map":{"version":3,"names":["React","useEffect","useState","Fragment","useParams","axios","ToastContainer","toast","getItem","useDispatch","useSelector","Button","Card","Container","Row","Col","useNavigate","Link","cartProduct","Swal","Category","dispatch","navigate","item","state","products","name","allData","setAllData","emailAddress","setEmailAddress","get","then","response","data","catch","err","error","message","localStorage","res","id","console","log","mail","getItemId","addToCart","productId","obj","customer","product","complete","post","fire","customClass","container","title","confirmButtonColor","width","icon","color","background","textAlign","marginTop","map","value","index","borderRadius","height","padding","image","fontSize","whiteSpace","overflow","textOverflow","description","price"],"sources":["C:/Users/Rashad/Desktop/auth/react-app/src/components/product/Category.js"],"sourcesContent":["import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { getItem } from \"../../redux/productsSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Card, Container, Row, Col } from \"react-bootstrap\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\n\r\nimport { cartProduct } from \"../../redux/cartSlice\";\r\n\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst Category = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const item = useSelector((state) => state.products.item);\r\n\r\n  const { name } = useParams();\r\n  const [allData, setAllData] = useState([]);\r\n  const [emailAddress, setEmailAddress] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // console.log(name);\r\n    axios\r\n      .get(`http://127.0.0.1:8000/api/products/?category=${name}`)\r\n      .then((response) => {\r\n        setAllData(response.data);\r\n      })\r\n      .catch((err) => toast.error(err.message));\r\n\r\n    axios\r\n      .get(\r\n        `http://127.0.0.1:8000/api/us/?search=${localStorage.getItem(\"email\")}`\r\n      )\r\n      .then((res) => {\r\n        setEmailAddress(res.data[0].id);\r\n      });\r\n    console.log(\"email address: \" + emailAddress);\r\n  }, [emailAddress]);\r\n\r\n  // -------------------------QTY-----------------------------\r\n\r\n  const mail = localStorage.getItem(\"email\");\r\n  // const dispatch = useDispatch();\r\n  const data = useSelector((state) => state.cartProduct.data);\r\n\r\n  useEffect(() => {\r\n    dispatch(cartProduct(mail));\r\n  }, [dispatch]);\r\n\r\n  // -------------------------QTY-----------------------------\r\n  const getItemId = (id) => {\r\n    dispatch(getItem(id));\r\n    navigate(\"/viewProduct\");\r\n  };\r\n\r\n  const addToCart = (productId) => {\r\n    const obj = {\r\n      customer: emailAddress,\r\n      product: productId,\r\n      complete: false,\r\n      // qty: 1,\r\n    };\r\n\r\n    axios\r\n      .post(\"http://127.0.0.1:8000/api/cart/\", obj)\r\n      .then((res) => {\r\n        // toast.success(\"Product added successfully\");\r\n\r\n        Swal.fire({\r\n          customClass: {\r\n            container: \"swal-overlay\",\r\n            title:'title-color'\r\n          },\r\n          title: \"Product added successfully\",\r\n          confirmButtonColor: \"#113A58\",\r\n          width: 250,\r\n          icon: \"success\",\r\n\r\n          color: \"#716add\",\r\n          background: \"#fff \",\r\n        });\r\n\r\n        dispatch(cartProduct(mail));\r\n      })\r\n      .catch((err) => toast.error(err.message));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Fragment>\r\n        <h3 style={{ textAlign: \"center\", marginTop: \"5px\", color: \"#777\" }}>\r\n          {name}\r\n        </h3>\r\n      </Fragment>\r\n\r\n      <Fragment>\r\n        <Container>\r\n          <Row className=\"justify-content-center align-items-center\">\r\n            {allData.map((value, index) => {\r\n              return (\r\n                <Col className=\"mt-3\" xs=\"auto\" key={index}>\r\n                  <Card\r\n                    className=\"shadow-lg rounded hoverElement\"\r\n                    style={{ width: \"15rem\", borderRadius: 15 }}\r\n                  >\r\n                    <div className=\"text-center\">\r\n                      <Card.Img\r\n                        style={{\r\n                          height: \"250px\",\r\n                          width: \"230px\",\r\n                          padding: \"5px\",\r\n\r\n                          // objectFit: \"none\",\r\n                        }}\r\n                        variant=\"top\"\r\n                        src={value.image}\r\n                      />\r\n                    </div>\r\n                    <Card.Body>\r\n                      <Card.Title\r\n                        style={{\r\n                          fontSize: \"17px\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                        }}\r\n                      >\r\n                        {value.name}\r\n                      </Card.Title>\r\n                      <Card.Text\r\n                        style={{\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                          textOverflow: \"ellipsis\",\r\n                        }}\r\n                      >\r\n                        {value.description}\r\n                      </Card.Text>\r\n                      <Card.Text>{value.price}$</Card.Text>\r\n\r\n                      <div className=\"d-flex aligh-items-center justify-content-between\">\r\n                        <Button\r\n                          onClick={() => getItemId(value.id)}\r\n                          style={{ background: \"#113A58\" }}\r\n                          variant=\"primary\"\r\n                        >\r\n                          View\r\n                        </Button>\r\n\r\n                        <Button\r\n                          onClick={() => addToCart(value.id)}\r\n                          style={{ background: \"#113A58\" }}\r\n                          variant=\"primary\"\r\n                        >\r\n                          Add Cart\r\n                        </Button>\r\n                      </div>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              );\r\n            })}\r\n          </Row>\r\n        </Container>\r\n      </Fragment>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}